// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	"encoding/json"
	"github.com/firehydrant/terraform-provider-firehydrant/internal/provider/typeconvert"
	tfTypes "github.com/firehydrant/terraform-provider-firehydrant/internal/provider/types"
	"github.com/firehydrant/terraform-provider-firehydrant/internal/sdk/models/operations"
	"github.com/firehydrant/terraform-provider-firehydrant/internal/sdk/models/shared"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
)

func (r *ChangeEventEntityDataSourceModel) ToOperationsGetChangeEventRequest(ctx context.Context) (*operations.GetChangeEventRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var changeEventID string
	changeEventID = r.ID.ValueString()

	out := operations.GetChangeEventRequest{
		ChangeEventID: changeEventID,
	}

	return &out, diags
}

func (r *ChangeEventEntityDataSourceModel) RefreshFromSharedChangeEventEntity(ctx context.Context, resp *shared.ChangeEventEntity) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		if resp.Attachments != nil {
		}
		if resp.Authors != nil {
			r.Authors = []tfTypes.AuthorEntity{}
			if len(r.Authors) > len(resp.Authors) {
				r.Authors = r.Authors[:len(resp.Authors)]
			}
			for authorsCount, authorsItem := range resp.Authors {
				var authors tfTypes.AuthorEntity
				authors.Email = types.StringPointerValue(authorsItem.Email)
				authors.ID = types.StringPointerValue(authorsItem.ID)
				authors.Name = types.StringPointerValue(authorsItem.Name)
				authors.Source = types.StringPointerValue(authorsItem.Source)
				if authorsCount+1 > len(r.Authors) {
					r.Authors = append(r.Authors, authors)
				} else {
					r.Authors[authorsCount].Email = authors.Email
					r.Authors[authorsCount].ID = authors.ID
					r.Authors[authorsCount].Name = authors.Name
					r.Authors[authorsCount].Source = authors.Source
				}
			}
		}
		r.Description = types.StringPointerValue(resp.Description)
		r.DurationIso8601 = types.StringPointerValue(resp.DurationIso8601)
		r.DurationMs = types.Int32PointerValue(typeconvert.IntPointerToInt32Pointer(resp.DurationMs))
		r.EndsAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(resp.EndsAt))
		if resp.Environments != nil {
			r.Environments = []tfTypes.EnvironmentEntryEntity{}
			if len(r.Environments) > len(resp.Environments) {
				r.Environments = r.Environments[:len(resp.Environments)]
			}
			for environmentsCount, environmentsItem := range resp.Environments {
				var environments tfTypes.EnvironmentEntryEntity
				if environmentsItem.ActiveIncidents != nil {
					environments.ActiveIncidents = make([]types.String, 0, len(environmentsItem.ActiveIncidents))
					for _, v := range environmentsItem.ActiveIncidents {
						environments.ActiveIncidents = append(environments.ActiveIncidents, types.StringValue(v))
					}
				}
				environments.CreatedAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(environmentsItem.CreatedAt))
				environments.Description = types.StringPointerValue(environmentsItem.Description)
				if environmentsItem.ExternalResources != nil {
					environments.ExternalResources = []tfTypes.ExternalResourceEntity{}
					for externalResourcesCount, externalResourcesItem := range environmentsItem.ExternalResources {
						var externalResources tfTypes.ExternalResourceEntity
						externalResources.ConnectionFullFaviconURL = types.StringPointerValue(externalResourcesItem.ConnectionFullFaviconURL)
						externalResources.ConnectionID = types.StringPointerValue(externalResourcesItem.ConnectionID)
						externalResources.ConnectionName = types.StringPointerValue(externalResourcesItem.ConnectionName)
						externalResources.ConnectionType = types.StringPointerValue(externalResourcesItem.ConnectionType)
						externalResources.CreatedAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(externalResourcesItem.CreatedAt))
						externalResources.Name = types.StringPointerValue(externalResourcesItem.Name)
						externalResources.RemoteID = types.StringPointerValue(externalResourcesItem.RemoteID)
						externalResources.RemoteURL = types.StringPointerValue(externalResourcesItem.RemoteURL)
						externalResources.UpdatedAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(externalResourcesItem.UpdatedAt))
						if externalResourcesCount+1 > len(environments.ExternalResources) {
							environments.ExternalResources = append(environments.ExternalResources, externalResources)
						} else {
							environments.ExternalResources[externalResourcesCount].ConnectionFullFaviconURL = externalResources.ConnectionFullFaviconURL
							environments.ExternalResources[externalResourcesCount].ConnectionID = externalResources.ConnectionID
							environments.ExternalResources[externalResourcesCount].ConnectionName = externalResources.ConnectionName
							environments.ExternalResources[externalResourcesCount].ConnectionType = externalResources.ConnectionType
							environments.ExternalResources[externalResourcesCount].CreatedAt = externalResources.CreatedAt
							environments.ExternalResources[externalResourcesCount].Name = externalResources.Name
							environments.ExternalResources[externalResourcesCount].RemoteID = externalResources.RemoteID
							environments.ExternalResources[externalResourcesCount].RemoteURL = externalResources.RemoteURL
							environments.ExternalResources[externalResourcesCount].UpdatedAt = externalResources.UpdatedAt
						}
					}
				}
				environments.ID = types.StringPointerValue(environmentsItem.ID)
				environments.Name = types.StringPointerValue(environmentsItem.Name)
				environments.Slug = types.StringPointerValue(environmentsItem.Slug)
				environments.UpdatedAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(environmentsItem.UpdatedAt))
				if environmentsCount+1 > len(r.Environments) {
					r.Environments = append(r.Environments, environments)
				} else {
					r.Environments[environmentsCount].ActiveIncidents = environments.ActiveIncidents
					r.Environments[environmentsCount].CreatedAt = environments.CreatedAt
					r.Environments[environmentsCount].Description = environments.Description
					r.Environments[environmentsCount].ExternalResources = environments.ExternalResources
					r.Environments[environmentsCount].ID = environments.ID
					r.Environments[environmentsCount].Name = environments.Name
					r.Environments[environmentsCount].Slug = environments.Slug
					r.Environments[environmentsCount].UpdatedAt = environments.UpdatedAt
				}
			}
		}
		r.ExternalID = types.StringPointerValue(resp.ExternalID)
		r.ID = types.StringPointerValue(resp.ID)
		if resp.Identities != nil {
			r.Identities = []tfTypes.ChangeIdentityEntity{}
			if len(r.Identities) > len(resp.Identities) {
				r.Identities = r.Identities[:len(resp.Identities)]
			}
			for identitiesCount, identitiesItem := range resp.Identities {
				var identities tfTypes.ChangeIdentityEntity
				identities.ChangeID = types.StringPointerValue(identitiesItem.ChangeID)
				identities.CreatedAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(identitiesItem.CreatedAt))
				identities.ID = types.StringPointerValue(identitiesItem.ID)
				identities.Type = types.StringPointerValue(identitiesItem.Type)
				identities.UpdatedAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(identitiesItem.UpdatedAt))
				identities.Value = types.StringPointerValue(identitiesItem.Value)
				if identitiesCount+1 > len(r.Identities) {
					r.Identities = append(r.Identities, identities)
				} else {
					r.Identities[identitiesCount].ChangeID = identities.ChangeID
					r.Identities[identitiesCount].CreatedAt = identities.CreatedAt
					r.Identities[identitiesCount].ID = identities.ID
					r.Identities[identitiesCount].Type = identities.Type
					r.Identities[identitiesCount].UpdatedAt = identities.UpdatedAt
					r.Identities[identitiesCount].Value = identities.Value
				}
			}
		}
		if resp.Labels != nil {
			r.Labels = make(map[string]types.String, len(resp.Labels))
			for key, value := range resp.Labels {
				result, _ := json.Marshal(value)
				r.Labels[key] = types.StringValue(string(result))
			}
		}
		if resp.RelatedChanges != nil {
			r.RelatedChanges = []tfTypes.ChangeEntity{}
			if len(r.RelatedChanges) > len(resp.RelatedChanges) {
				r.RelatedChanges = r.RelatedChanges[:len(resp.RelatedChanges)]
			}
			for relatedChangesCount, relatedChangesItem := range resp.RelatedChanges {
				var relatedChanges tfTypes.ChangeEntity
				relatedChanges.CreatedAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(relatedChangesItem.CreatedAt))
				relatedChanges.Description = types.StringPointerValue(relatedChangesItem.Description)
				relatedChanges.ID = types.StringPointerValue(relatedChangesItem.ID)
				if relatedChangesItem.Labels != nil {
					relatedChanges.Labels = make(map[string]types.String, len(relatedChangesItem.Labels))
					for key1, value1 := range relatedChangesItem.Labels {
						result1, _ := json.Marshal(value1)
						relatedChanges.Labels[key1] = types.StringValue(string(result1))
					}
				}
				relatedChanges.Summary = types.StringPointerValue(relatedChangesItem.Summary)
				relatedChanges.UpdatedAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(relatedChangesItem.UpdatedAt))
				if relatedChangesCount+1 > len(r.RelatedChanges) {
					r.RelatedChanges = append(r.RelatedChanges, relatedChanges)
				} else {
					r.RelatedChanges[relatedChangesCount].CreatedAt = relatedChanges.CreatedAt
					r.RelatedChanges[relatedChangesCount].Description = relatedChanges.Description
					r.RelatedChanges[relatedChangesCount].ID = relatedChanges.ID
					r.RelatedChanges[relatedChangesCount].Labels = relatedChanges.Labels
					r.RelatedChanges[relatedChangesCount].Summary = relatedChanges.Summary
					r.RelatedChanges[relatedChangesCount].UpdatedAt = relatedChanges.UpdatedAt
				}
			}
		}
		if resp.Services != nil {
			r.Services = []tfTypes.ServiceEntityLite{}
			if len(r.Services) > len(resp.Services) {
				r.Services = r.Services[:len(resp.Services)]
			}
			for servicesCount, servicesItem := range resp.Services {
				var services tfTypes.ServiceEntityLite
				services.AlertOnAdd = types.BoolPointerValue(servicesItem.AlertOnAdd)
				if servicesItem.AllowedParams != nil {
					services.AllowedParams = make([]types.String, 0, len(servicesItem.AllowedParams))
					for _, v := range servicesItem.AllowedParams {
						services.AllowedParams = append(services.AllowedParams, types.StringValue(v))
					}
				}
				services.AutoAddRespondingTeam = types.BoolPointerValue(servicesItem.AutoAddRespondingTeam)
				services.CreatedAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(servicesItem.CreatedAt))
				services.Description = types.StringPointerValue(servicesItem.Description)
				services.ID = types.StringPointerValue(servicesItem.ID)
				if servicesItem.Labels == nil {
					services.Labels = nil
				} else {
					services.Labels = &tfTypes.ServiceEntityLiteLabels{}
				}
				services.Name = types.StringPointerValue(servicesItem.Name)
				services.ServiceTier = types.Int32PointerValue(typeconvert.IntPointerToInt32Pointer(servicesItem.ServiceTier))
				services.Slug = types.StringPointerValue(servicesItem.Slug)
				services.UpdatedAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(servicesItem.UpdatedAt))
				if servicesCount+1 > len(r.Services) {
					r.Services = append(r.Services, services)
				} else {
					r.Services[servicesCount].AlertOnAdd = services.AlertOnAdd
					r.Services[servicesCount].AllowedParams = services.AllowedParams
					r.Services[servicesCount].AutoAddRespondingTeam = services.AutoAddRespondingTeam
					r.Services[servicesCount].CreatedAt = services.CreatedAt
					r.Services[servicesCount].Description = services.Description
					r.Services[servicesCount].ID = services.ID
					r.Services[servicesCount].Labels = services.Labels
					r.Services[servicesCount].Name = services.Name
					r.Services[servicesCount].ServiceTier = services.ServiceTier
					r.Services[servicesCount].Slug = services.Slug
					r.Services[servicesCount].UpdatedAt = services.UpdatedAt
				}
			}
		}
		r.StartsAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(resp.StartsAt))
		r.Summary = types.StringPointerValue(resp.Summary)
		r.UpdatedAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(resp.UpdatedAt))
	}

	return diags
}
